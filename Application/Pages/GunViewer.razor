@namespace Application.Pages
@using Business
@using Business.Models;
@using Business.Models.Common;

@if (CraftedGun == null)
{
  <div class="spinner"></div>
}
else
{
  <div id="cards">  

    <figure class="card card--normal">
      <div class="card__image-container">
        <img src="https://cdn.bulbagarden.net/upload/thumb/e/e2/133Eevee.png/1200px-133Eevee.png" alt="Eevee" class="card__image">   
      </div>
      
      <figcaption class="card__caption">
        <h1 class=@($"card__name_{CraftedGun.Rarity.ToString().ToLower()}")>@CraftedGun.Name</h1>
        
        <h3 class=@($"card__type_{CraftedGun.Element.ToString().ToLower().Replace(", ","_")}")>
          @CraftedGun.Element.ToString()
        </h3>

        <h3 class="card__guild">
          @CraftedGun.Guild
        </h3>

        <table class="card__stats">
          <tbody>
            <tr>
              <th>Level</th>
              <td>@CraftedGun.Level</td>
            </tr>
            <tr>
              <th>Damage</th>
              <td>@CraftedGun.Damage</td>
            </tr>
            
            <tr>
              <th>Range</th>
              <td>@CraftedGun.Range</td>
            </tr>
          </tbody>
        </table>

        <table class="card__hits">
          <tbody>            
              @foreach(var kvp in CraftedGun.HitsByAccuracy)
              {
                <tr>
                  <th>@kvp.Key</th>
                  <td>@kvp.Value.Hits</td>
                  <td>@kvp.Value.Crits</td>
                </tr>
              }
          </tbody>
        </table>
        
        <div class="card__abilities">
          @foreach(var bonus in CraftedGun.Bonuses)
          {
            <h4 class="card__ability">
              <span class="card__label">@bonus</span>            
            </h4>
          }
        </div>

        @if (CraftedGun.RedText != null)
        {
          <div class="card__redtexts">
            <h4 class="card__redtext">
              <span class="card__label">@CraftedGun.RedText.Name</span>            
            </h4>
          </div>
        }        

      </figcaption>
    </figure>
  </div>
}

@code {
    [Parameter]
    public Gun CraftedGun { get; set; }
}